<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<!DOCTYPE html>
<html>
<jsp:include page="../common/header.jsp"></jsp:include>
<head>
<meta charset="UTF-8">
<!-- ========== All CSS files linkup ========= -->
<script src="http://code.jquery.com/jquery-3.7.1.js"></script>
<link type="text/css" rel="stylesheet"
	href="/syLibrary/include/user.css">
<!-- <link type="text/css" rel="stylesheet"
	href="/syLibrary/include/template2.css"> -->
<script>
	function renewDate(l_memno, l_bookid) {
		if(confirm('선택하신 도서를 연장하시겠습니까?')){
			location.href = '/syLibrary/myLibrary_servlet/renew.do?mNo=' + l_memno + '&bId=' + l_bookid;
		}
	}
	
	function list(page) {
		location.href = "/syLibrary/myLibrary_servlet/search.do?cur_page=" + page
				+ "&search_option=${search_option}&keyword=${keyword}";
	}
</script>
</head>
<body>
	<div class="container card-style mb-30"
		style="float: none; margin: 0 auto; margin-top: 3em">
		<h5>
			<b>대출 현황건수 : ${myLoanBook[0].lo_book_cnt} 건</b>
		</h5>
		<hr>
		<ul>
			<c:forEach var="myList" items="${myLoanBook}">
				<li style="list-style: none;">
					<div class="row mb-4">
						<div class="col col-md-auto">
							<img src="${myList.b_url}" style="width: 150px; height: 200px;">
						</div>
						<div class="col detail">
							<p>
								<a
									href="/syLibrary/search_servlet/bookInfo.do?b_id=${myList.l_bookid}">${myList.b_name}</a>
							</p>
							<p>
								<span>작가 : ${myList.b_author} </span> <span>출판사 :
									${myList.b_pub} </span> <span>발행연도 : ${myList.b_year}</span>
							</p>
							<p>
								<span>도서분류 : ${myList.b_category} </span> <span>ISBN :
									${myList.b_isbn} </span>
							</p>
							<p>
								<c:set var="now" value="<%=new java.util.Date()%>" />
								<fmt:formatDate value="${now}" pattern="yyyy-MM-dd" var="today" />

								<span>대출일 : ${myList.l_lodate}</span>
								<c:if test="${myList.l_retdate ge today}">
									<span style="color: black;"> 반납예정일 : ${myList.l_retdate}
									</span>
								</c:if>
								<c:if test="${myList.l_retdate lt today}">
									<span style="color: red;"> 반납예정일 : ${myList.l_retdate}
										(연체중)</span>
								</c:if>
							</p>
						</div>
						<div class="col align-self-center">
							<p>
								<input type="button" value="연장신청" class="btn text-white pink"
									onclick="renewDate(${myList.l_memno}, ${myList.l_bookid})">
							</p>
						</div>
					</div>
				</li>
			</c:forEach>
		</ul>
	</div>
	<!-- 페이지 -->
	<%-- 		<tr align="center">
			<td colspan="7"><c:if test="${page.curPage>1}">
					<a href="#" onclick="list('1')">[처음]</a>
				</c:if> <c:if test="${page.curBlock>1}">
					<a href="#" onclick="list('${page.prevPage}')">[이전]</a>
				</c:if> <c:forEach var="num" begin="${page.blockStart}"
					end="${page.blockEnd}">
					<c:choose>
						<c:when test="${num==page.curPage}">
							<span style="color: red">${num}</span>
						</c:when>
						<c:otherwise>
							<a href="#" onclick="list('${num}')">${num} </a>
						</c:otherwise>
					</c:choose>
				</c:forEach> <c:if test="${page.curBlock<page.totBlock}">
					<a href="#" onclick="list('${page.nextPage}')">[다음]</a>
				</c:if> <c:if test="${page.curPage<page.totPage}">
					<a href="#" onclick="list('${page.totPage}')">[마지막]</a>
				</c:if></td>
		</tr> --%>
</body>
</html>